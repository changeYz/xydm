<?php if (!defined('THINK_PATH')) exit();?><!DOCTYPE html>
<!-- saved from url=(0036)https://m.efucms.com/book/10227/ -->
<html data-dpr="1" style="font-size: 43.1px;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title><?php echo ($_CFG['site']['name']); ?></title>
    <meta name="keywords" content="兽性老公轻点爱,樱前线,兽性老公轻点爱在线漫画,兽性老公轻点爱漫画全集,,樱前线,小说漫画源码">
    <meta name="description" content="兽性老公轻点爱,樱前线,惨！ 一夜错情，她被只手遮天的太子爷全城通缉！顾可馨双手护住自己，结结巴巴：“我，我只是一个飞机场！” 太子爷将之扑倒，邪魅一笑：“乖，摸摸大，给我生一个孩子……” 这是一个腹黑太子爷，狂宠小娇妻没羞没臊的婚后日常~">
    <!-- 共用引入资源.开始 -->

    <script src="/Public/home/mhjs/stats.js" name="MTAH5" sid="500462993"></script>
    <meta name="viewport" content="designWidth=750,width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- 防止加载lib.flexible加载的时候文字由大变小的闪烁 -->
    <style>html,body{font-size:12px;}</style>
    <!-- lib.flexible 移动端相对适应比例 必须在浏览器head类 -->
    <script type="text/javascript">
        !function (a, b) { function c() { var b = f.getBoundingClientRect().width; b / i > 540 && (b = 540 * i); var c = b / 10; f.style.fontSize = c + "px", k.rem = a.rem = c } var d, e = a.document, f = e.documentElement, g = e.querySelector('meta[name="viewport"]'), h = e.querySelector('meta[name="flexible"]'), i = 0, j = 0, k = b.flexible || (b.flexible = {}); if (g) {  var l = g.getAttribute("content").match(/initial\-scale=([\d\.]+)/); l && (j = parseFloat(l[1]), i = parseInt(1 / j)) } else if (h) { var m = h.getAttribute("content"); if (m) { var n = m.match(/initial\-dpr=([\d\.]+)/), o = m.match(/maximum\-dpr=([\d\.]+)/); n && (i = parseFloat(n[1]), j = parseFloat((1 / i).toFixed(2))), o && (i = parseFloat(o[1]), j = parseFloat((1 / i).toFixed(2))) } } if (!i && !j) { var p = (a.navigator.appVersion.match(/android/gi), a.navigator.appVersion.match(/iphone/gi)), q = a.devicePixelRatio; i = p ? q >= 3 && (!i || i >= 3) ? 3 : q >= 2 && (!i || i >= 2) ? 2 : 1 : 1, j = 1 / i } if (f.setAttribute("data-dpr", i), !g) if (g = e.createElement("meta"), g.setAttribute("name", "viewport"), g.setAttribute("content", "initial-scale=" + 1 + ", maximum-scale=" + 1 + ", minimum-scale=" + 1 + ", user-scalable=no"), f.firstElementChild) f.firstElementChild.appendChild(g); else { var r = e.createElement("div"); r.appendChild(g), e.write(r.innerHTML) } a.addEventListener("resize", function () { clearTimeout(d), d = setTimeout(c, 300) }, !1), a.addEventListener("pageshow", function (a) { a.persisted && (clearTimeout(d), d = setTimeout(c, 300)) }, !1), "complete" === e.readyState ? e.body.style.fontSize = 12 * i + "px" : e.addEventListener("DOMContentLoaded", function () { e.body.style.fontSize = 12 * i + "px" }, !1), c(), k.dpr = a.dpr = i, k.refreshRem = c, k.rem2px = function (a) { var b = parseFloat(a) * this.rem; return "string" == typeof a && a.match(/rem$/) && (b += "px"), b }, k.px2rem = function (a) { var b = parseFloat(a) / this.rem; return "string" == typeof a && a.match(/px$/) && (b += "rem"), b } }(window, window.lib || (window.lib = {}));
    </script>
    <link rel="stylesheet" type="text/css" href="/Public/home/mhcss/style.min.css">
	<link rel="stylesheet" type="text/css" href="/Public/home/css/vendor.css">
	<link rel="stylesheet" type="text/css" href="/Public/font-awesome-4.4.0/css/font-awesome.min.css?v=201712191015" />
    <script type="text/javascript" src="/Public/home/mhjs/fundebug.0.1.7.min.js" apikey="ba3a0e0d938e92b44f279067dffb8d071ee87fc35eb75918b7a900e8581a955d"></script>
    <script type="text/javascript" src="/Public/home/mhjs/jquery.js"></script>
    <!-- 共用引入资源.结束 -->
    <script type="text/javascript" src="/Public/home/mhjs/saved_resource"></script>
	<script type="text/javascript" src="/Public/home/js/newWindow.js"></script>
    <script>(function(){new Image().src='//res.efucms.com/wap_v3/images/placeholder-unruly.png?v=20171208';})();</script>
</head>
<style>
.cover-box > .bg {
    width: 100%;
    overflow: hidden;
    position: relative;
}
.cover-box > .bg img {
    display: block;
    width: 100%;
    height: 200px;
}
</style>
<body style="font-size: 12px;">
<div class="cover-box">
    <div class="bg">
        <img src="<?php echo ($info["detail_pic"]); ?>" />
        <div class="gradient"></div>
    </div>
    <div class="container">
        <div class="title"><?php echo ($info["title"]); ?></div>
        <div class="tags">
            <?php if(is_array($arr_catename)): $i = 0; $__LIST__ = $arr_catename;if( count($__LIST__)==0 ) : echo "" ;else: foreach($__LIST__ as $key=>$vo): $mod = ($i % 2 );++$i;?><div class="label">
                <div class="item"><a href="javascript:void(0);"><?php echo ($vo); ?></a></div>
            </div><?php endforeach; endif; else: echo "" ;endif; ?>
        </div>
    </div>
    <div class="action">
        <a href="<?php echo U('index');?>" class="back">
            <svg width="12" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 40">
            <path d="M21.56 39.47a2 2 0 0 1-1.38-.56L.44 20 20.18 1.09A2.01 2.01 0 1 1 22.95 4L6.23 20l16.72 16a2 2 0 0 1-1.38 3.44z" fill="#fff"></path></svg>
        </a>
        <div id="showcollect">
        <?php if($tag == 1): ?><a href="javascript:void(0);" onclick="user_add_book_shelf(<?php echo ($info["id"]); ?>);" class="btn gray">
		       	已收藏
		    </a>
        <?php else: ?>
	        <a href="javascript:void(0);" onclick="user_add_book_shelf(<?php echo ($info["id"]); ?>);" class="btn">
	            <svg width="10" height="10" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
	                <path fill="#fff" d="M20 8h-8V0H8v8H0v4h8v8h4v-8h8V8"></path>
	            </svg>收藏
	        </a><?php endif; ?>
        </div>
    </div>
</div>

<div class="ac-box" id="book-info" style="border-bottom: 1px solid #eee;">
    <article class="article">
        <div class="head">
            <div class="title">作品简介</div>
        </div>
        <div class="body">
           <?php echo ($info["summary"]); ?>      
        </div>
        <div class="author">作者：<?php echo ($info["author"]); ?></div>
    </article>
    <div class="bar">
        <div class="col" style="text-align: left"><i class="icon-hot"></i> 人气值 <?php echo ($info["reader"]); ?></div>
        <div class="col" style="text-align: center"><i class="icon-like"></i> <?php echo ($info["likes"]); ?>人已点赞</div>
        <div class="col" style="text-align: right"><i class="icon-mark"></i> <?php echo ($info["collect"]); ?>人已收藏</div>
    </div>
</div>
<style>
	.zhe{
		width:100%;
	}
	.zhe h4{
		line-height: 40px;
		padding-left: 10px;
		font-size: 16px;
		font-weight: 600;
	}
	.zhe ul{
		padding:0 0 0 10px;
	}
	.zhe ul li{
		height: 1.3rem;
		line-height: 1.3rem;
		font-size: .38rem;
		border-bottom: 1px solid #eee;
		position:relative;
	}
	.zhe ul li i{
		font-size: .7rem;
		color: #333;
		position:absolute;
		top:.3rem;
		right:.4rem;
	}
	.zhe ul li .playing{
		position:absolute;
		top:.3rem;
		right:.4rem;
		width: .5rem;
		height: .5rem;
	}
	.footer{
		position: fixed;
		bottom: 0;
		height: 1.3rem;
		width: 100%;
		left: 0;
		border-top: 1px solid #e5e5eb;
		background: #fff;
		display:none;
	}
	.footer .fot1{
		width:55%;
		height:100%;
		float:left;
	}
	.footer .fot2{
		width:45%;
		height:100%;
		float:left;
		display:-webkit-box;;
	}
	.footer .fot2 a{
		display:block;
		-webkit-box-flex:1;
		border-left:1px solid #e5e5eb;
		text-align: center;
	}
	.footer .fot1 h1{
		font-size: .4rem;
		padding-left: 2%;
		line-height: .8rem;
		width: 98%;
		overflow: hidden;
		text-overflow: ellipsis;
		white-space: nowrap;
	}
	.footer .fot1 h2{
		width: 98%;
		padding-left: 2%;
		font-size: .35rem;
		line-height:.3rem;
		color: #999;
	}
	.footer .fot2 a i{
		font-size: .5rem;
		margin-top: .45rem;
	}
	.more{
		width:100%;
		margin:.5rem 0;
		text-align:center;
	}
	.more button{
		margin: 0 auto;
		height: .8rem;
		width: 50%;
		border: none;
		-webkit-appearance: none;
		background: #2196F3;
		color: #fff;
		border-radius: 10px;
		line-height: .8rem;
	}
</style>
<section class="zhe">
	<h4>章节列表</h4>
	<ul class="lists" id="lists">
		
	</ul>
	<div class="more">
		<button onclick="loadMore();">加载更多章节</button>
	</div>
</section>
<div style="height:1.35rem;clear:both"></div>
<div class="footer">
	<div class="fot1">
		<h1><?php echo ($info["title"]); ?></h1>
		<h2></h2>
	</div>
	<div class="fot2">
		<a href="javascript:;" onclick="prevPlay();">
			<i class="fa fa-fast-backward"></i>
		</a>
		<a id="play">
			<i class="fa fa-pause"></i>
		</a>
		<a href="javascript:;" onclick="nextPlay();">
			<i class="fa fa-fast-forward"></i>
		</a>
	</div>
</div>
<script>
	//初始化被点击的li
	var index = -1;
	var page = 1; //初始化加载页数
	var audio;
	$(function(){
		loadData();
		audio = document.createElement('audio');
	});
	
	function loadMore(){
		page++;
		loadData();
	}
	
	
	//li点击播放
	function play(ob){
		index = $(ob).index();
		Audio();
	}
	
	//下方play点击
	$('#play').click(function(){
		Audio();
	})
	
	
	//上一首
	function prevPlay(){
		var cur = index - 1;
		if(cur<0){
			return;
		}else{
			index--;
			Audio();
		}
	}
	
	//下一首
	function nextPlay(){
		var cur = index+1;
		if(cur>$('.zhe ul li').length-1){
			return;
		}else{
			index++;
			Audio();
		}
	}
	
	
	//显示操作
	function showFoot(){
		if (audio.paused) {
			$('#play').find('i').removeClass('fa-pause');
			$('#play').find('i').addClass('fa-play')
		}else {
			$('#play').find('i').removeClass('fa-play');
			$('#play').find('i').addClass('fa-pause')
		}
		$('.footer').show();
	}
	
	
	//播放操作
	function Audio(){
		//定义播放的li
		var $li = $('.zhe ul li').eq(index);
		var path = $li.attr("_path");
		
		
		$('.zhe ul li').removeClass('playing');
		$('.zhe ul li').find('a').html('');
		$('.zhe ul li').find('a').html('<i class="fa fa-play-circle-o"></i>');
		
		//当前集数
		var $jino = $li.attr('_jino');
		//该书的收费集数
		var $paynum = $li.attr("_pay_num");
		
		if($jino>=$paynum){
			$.post("<?php echo U('paynumPlay');?>",{jino:$jino,yid:"<?php echo ($info["id"]); ?>"},function(d){
				if(d){
					if(d.status){
						if (audio.src != path) {
							audio.src = path;
							$li.addClass('playing');
							$li.find('a').html('<img src="./Public/images/playing.gif" class="playing">');
							audio.play();
						} else {
							if (audio.paused) {
								audio.play();
								$li.addClass('playing');
								$li.find('a').html('<img src="./Public/images/playing.gif" class="playing">');
							} else {
								audio.pause();
								$li.removeClass('playing');
								$li.find('a').html('<i class="fa fa-play-circle-o"></i>');
							}
						}
						showFoot();
					}else{
						alert(d.info);
					}
				}else{
					alert('请求失败！');
				}
			});
		}else{
			if (audio.src != path) {
				audio.src = path;
				$li.addClass('playing');
				$li.find('a').html('<img src="./Public/images/playing.gif" class="playing">');
				audio.play();
			} else {
				if (audio.paused) {
					audio.play();
					$li.addClass('playing');
					$li.find('a').html('<img src="./Public/images/playing.gif" class="playing">');
				} else {
					audio.pause();
					$li.removeClass('playing');
					$li.find('a').html('<i class="fa fa-play-circle-o"></i>');
				}
			}
			showFoot();
		}	
	}
	
	function loadData(){
		$.post("<?php echo U('getJino');?>",{page:page,yid:"<?php echo ($info["id"]); ?>"},function(d){
			if(d){
				if(d.status){
					$('#lists').append(d.info);
				}else{
					if(page == 1){
						alert('没有数据！');
					}else{
						alert('已加载完！');
					}
				}
			}else{
				alert('网络异常！');
			}
		});
	}	
		
</script>
<script>
	window.shareData = {
		img: "<?php echo (complete_url($info['cover_pic'])); ?>", 
		link: "<?php echo complete_url(U('bookinfo',http_build_query(array_merge(array('uid' => encode($user['id']),'yid'=>$info['id']),$_GET))));?>",
		title: "<?php echo ($info['title']); ?>",
		desc: "<?php echo str_replace(PHP_EOL,'',($info['summary']));?>",
	};	
</script>
	<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
	<script>
	wx.config({
		debug: false,
		appId: "<?php echo ($jssdk['appId']); ?>",
		timestamp: <?php echo ($jssdk['timestamp']); ?>,
		nonceStr: '<?php echo ($jssdk['nonceStr']); ?>',
		signature: '<?php echo ($jssdk['signature']); ?>',
		jsApiList: ['onMenuShareTimeline','onMenuShareAppMessage']
	});
	wx.ready(function () {
		wx.checkJsApi({
			jsApiList: ['onMenuShareTimeline','onMenuShareAppMessage'], // 需要检测的JS接口列表，所有JS接口列表见附录2,
			success: function(res) {
				//alert(JSON.stringify(res));
			}
		});
		wx.error(function(res){
			console.log('err:'+JSON.stringify(res));
			// config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。

		});
		//分享给朋友
		wx.onMenuShareAppMessage({
			title: window.shareData.title, // 分享标题
			desc: window.shareData.desc, // 分享描述
			link: window.shareData.link, // 分享链接
			imgUrl: window.shareData.img, // 分享图标
			type: 'link', // 分享类型,music、video或link，不填默认为link
			dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
			success: function () { 
			},
			cancel: function () { 
				
			}
		});
		//分享到朋友圈
		wx.onMenuShareTimeline({
			title: window.shareData.title, // 分享标题
			link: window.shareData.link, // 分享链接
			imgUrl: window.shareData.img, // 分享图标
			success: function () { 
				// 用户确认分享后执行的回调函数
			},
			cancel: function () { 
				// 用户取消分享后执行的回调函数
			}
		});
	});
	</script>
	<?php echo ($_CFG["site"]["thirdcode"]); ?>

</body>
</html>