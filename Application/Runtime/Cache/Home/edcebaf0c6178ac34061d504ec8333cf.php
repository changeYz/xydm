<?php if (!defined('THINK_PATH')) exit();?><!DOCTYPE html>
<!-- saved from url=(0036)https://m.efucms.com/book/10227/ -->
<html data-dpr="1" style="font-size: 43.1px;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title><?php echo ($_CFG['site']['name']); ?></title>
    <meta name="keywords" content="兽性老公轻点爱,樱前线,兽性老公轻点爱在线漫画,兽性老公轻点爱漫画全集,,樱前线,小说漫画源码">
    <meta name="description" content="兽性老公轻点爱,樱前线,惨！ 一夜错情，她被只手遮天的太子爷全城通缉！顾可馨双手护住自己，结结巴巴：“我，我只是一个飞机场！” 太子爷将之扑倒，邪魅一笑：“乖，摸摸大，给我生一个孩子……” 这是一个腹黑太子爷，狂宠小娇妻没羞没臊的婚后日常~">
    <!-- 共用引入资源.开始 -->

    <script src="/Public/home/mhjs/stats.js" name="MTAH5" sid="500462993"></script>
    <meta name="viewport" content="designWidth=750,width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- 防止加载lib.flexible加载的时候文字由大变小的闪烁 -->
    <style>html,body{font-size:12px;}</style>
    <!-- lib.flexible 移动端相对适应比例 必须在浏览器head类 -->
    <script type="text/javascript">
        !function (a, b) { function c() { var b = f.getBoundingClientRect().width; b / i > 540 && (b = 540 * i); var c = b / 10; f.style.fontSize = c + "px", k.rem = a.rem = c } var d, e = a.document, f = e.documentElement, g = e.querySelector('meta[name="viewport"]'), h = e.querySelector('meta[name="flexible"]'), i = 0, j = 0, k = b.flexible || (b.flexible = {}); if (g) {  var l = g.getAttribute("content").match(/initial\-scale=([\d\.]+)/); l && (j = parseFloat(l[1]), i = parseInt(1 / j)) } else if (h) { var m = h.getAttribute("content"); if (m) { var n = m.match(/initial\-dpr=([\d\.]+)/), o = m.match(/maximum\-dpr=([\d\.]+)/); n && (i = parseFloat(n[1]), j = parseFloat((1 / i).toFixed(2))), o && (i = parseFloat(o[1]), j = parseFloat((1 / i).toFixed(2))) } } if (!i && !j) { var p = (a.navigator.appVersion.match(/android/gi), a.navigator.appVersion.match(/iphone/gi)), q = a.devicePixelRatio; i = p ? q >= 3 && (!i || i >= 3) ? 3 : q >= 2 && (!i || i >= 2) ? 2 : 1 : 1, j = 1 / i } if (f.setAttribute("data-dpr", i), !g) if (g = e.createElement("meta"), g.setAttribute("name", "viewport"), g.setAttribute("content", "initial-scale=" + 1 + ", maximum-scale=" + 1 + ", minimum-scale=" + 1 + ", user-scalable=no"), f.firstElementChild) f.firstElementChild.appendChild(g); else { var r = e.createElement("div"); r.appendChild(g), e.write(r.innerHTML) } a.addEventListener("resize", function () { clearTimeout(d), d = setTimeout(c, 300) }, !1), a.addEventListener("pageshow", function (a) { a.persisted && (clearTimeout(d), d = setTimeout(c, 300)) }, !1), "complete" === e.readyState ? e.body.style.fontSize = 12 * i + "px" : e.addEventListener("DOMContentLoaded", function () { e.body.style.fontSize = 12 * i + "px" }, !1), c(), k.dpr = a.dpr = i, k.refreshRem = c, k.rem2px = function (a) { var b = parseFloat(a) * this.rem; return "string" == typeof a && a.match(/rem$/) && (b += "px"), b }, k.px2rem = function (a) { var b = parseFloat(a) / this.rem; return "string" == typeof a && a.match(/px$/) && (b += "rem"), b } }(window, window.lib || (window.lib = {}));
    </script>
    <link rel="stylesheet" type="text/css" href="/Public/home/mhcss/style.min.css">
	<link rel="stylesheet" type="text/css" href="/Public/home/css/vendor.css">
    <script type="text/javascript" src="/Public/home/mhjs/fundebug.0.1.7.min.js" apikey="ba3a0e0d938e92b44f279067dffb8d071ee87fc35eb75918b7a900e8581a955d"></script>
    <script type="text/javascript" src="/Public/home/mhjs/jquery.js"></script>
    <!-- 共用引入资源.结束 -->
    <script type="text/javascript" src="/Public/home/mhjs/saved_resource"></script>
	<script type="text/javascript" src="/Public/home/js/newWindow.js"></script>
    <script>(function(){new Image().src='//res.efucms.com/wap_v3/images/placeholder-unruly.png?v=20171208';})();</script>
</head>
<style>
.cover-box > .bg {
    width: 100%;
    overflow: hidden;
    position: relative;
}
.cover-box > .bg img {
    display: block;
    width: 100%;
    height: 200px;
}
</style>
<body style="font-size: 12px;">
<div class="cover-box">
    <div class="bg">
        <img src="<?php echo ($info["detail_pic"]); ?>" />
        <div class="gradient"></div>
    </div>
    <div class="container">
        <div class="title"><?php echo ($info["title"]); ?></div>
        <div class="tags">
            <!-- <div class="label">
                <div class="item"><a href="javascript:void(0);">总裁</a></div>
            </div> -->
            <?php if(is_array($arr_catename)): $i = 0; $__LIST__ = $arr_catename;if( count($__LIST__)==0 ) : echo "" ;else: foreach($__LIST__ as $key=>$vo): $mod = ($i % 2 );++$i;?><div class="label">
                <div class="item"><a href="javascript:void(0);"><?php echo ($vo); ?></a></div>
            </div><?php endforeach; endif; else: echo "" ;endif; ?>
        </div>
    </div>
    <div class="action">
        <a href="<?php echo U('Book/index');?>" class="back">
            <svg width="12" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 40">
            <path d="M21.56 39.47a2 2 0 0 1-1.38-.56L.44 20 20.18 1.09A2.01 2.01 0 1 1 22.95 4L6.23 20l16.72 16a2 2 0 0 1-1.38 3.44z" fill="#fff"></path></svg>
        </a>
        <div id="showcollect">
        <?php if($tag == 1): ?><a href="javascript:void(0);" onclick="user_add_book_shelf(<?php echo ($info["id"]); ?>);" class="btn gray">
		       	已收藏
		    </a>
        <?php else: ?>
	        <a href="javascript:void(0);" onclick="user_add_book_shelf(<?php echo ($info["id"]); ?>);" class="btn">
	            <svg width="10" height="10" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
	                <path fill="#fff" d="M20 8h-8V0H8v8H0v4h8v8h4v-8h8V8"></path>
	            </svg>收藏
	        </a><?php endif; ?>
        </div>
    </div>
</div>
<nav class="bm-tabs">
    <div class="item">
        <a href="javascript:void(0)" type="info" class="active">详情</a>
    </div>
    <div class="item">
        <a href="javascript:void(0)" type="chapters" id="btn_chap">选集</a>
    </div>
</nav>
<div class="ac-box" id="book-info">
    <article class="article">
        <div class="head">
            <div class="title">作品简介</div>
        </div>
        <div class="body">
           <?php echo ($info["summary"]); ?>      
        </div>
        <div class="author">作者：<?php echo ($info["author"]); ?></div>
    </article>
    <div class="bar">
        <div class="col" style="text-align: left"><i class="icon-hot"></i> 人气值 <?php echo ($info["reader"]); ?></div>
        <div class="col" style="text-align: center"><i class="icon-like"></i> <?php echo ($info["likes"]); ?>人已点赞</div>
        <div class="col" style="text-align: right"><i class="icon-mark"></i> <?php echo ($info["collect"]); ?>人已收藏</div>
    </div>
</div>
<div class="ac-box mb-tabar" id="chapters" style="display: none;">
    <div class="ch">
        <div class="title"><?php if($info['status'] == 1): ?>连载中<?php else: ?>已完结<?php endif; ?> <span class="small"><!-- 2018-01-06 -->更新到<?php echo ($info["episodes"]); ?>章</span></div>
    </div>
    <div class="list" id="html_box">
    <?php if(is_array($huas)): $i = 0; $__LIST__ = $huas;if( count($__LIST__)==0 ) : echo "" ;else: foreach($__LIST__ as $key=>$vo): $mod = ($i % 2 );++$i; $money = M('book_episodes')->where(array('ji_no'=>$vo,'mhid'=>$info['id']))->getField('money'); if(!$money || $money<=0){ $money = $_site['xsmoney']; } $money = intval($money); $read = M('book_read')->where(array('ji_no'=>$vo,'mhid'=>$info['id'],'user_id'=>$user['id']))->find(); ?>
    
		<?php if($vo >= $info['pay_num'] and $info['pay_num'] > 0): if($read): ?><div class="item">
				<a href="<?php echo U('Book/inforedit');?>&bid=<?php echo ($info['id']); ?>&ji_no=<?php echo ($vo); ?>" class=""><?php echo ($vo); ?>章<span><?php echo ($money); ?>书币</span></a></div>
			<?php else: ?>
				<div class="item lock">
				<a href="<?php echo U('Book/inforedit');?>&bid=<?php echo ($info['id']); ?>&ji_no=<?php echo ($vo); ?>" class=""><?php echo ($vo); ?>章<span><?php echo ($money); ?>书币</span></a></div><?php endif; ?>
		<?php else: ?>
			<div class="item">
			<a href="<?php echo U('Book/inforedit');?>&bid=<?php echo ($info['id']); ?>&ji_no=<?php echo ($vo); ?>" class="" style="text-align:center;"><?php echo ($vo); ?>章<span></span></a></div><?php endif; endforeach; endif; else: echo "" ;endif; ?>
    </div>
    <div class="action">
        <a href="javascript:void(0)" class="btn show-all chapter_all">查看更多章节 <i class="icon-arrow"></i></a>
    </div>
</div>
<style>
.mui-media-object {
    border-radius: 100%;
    width: 30px;
    height: 30px;
}
.mui-media-body p {
    margin-top: 5px;
    font-size: 12px;
    color: #666;
}
</style>

<div class="bm-box mt-10 mb-10">
    <div class="head">
        <div class="title">最新评论(<?php echo ($mcounts); ?>)</div>
        <div class="pull-right">
            <a href="<?php echo U('Book/Comments',array('id'=>$info['id'],'type'=>"xs"));?>" class="change">全部评论&gt;</a>
        </div>
    </div>
    <div class="books-row">
		<?php if($coments): if(is_array($coments)): foreach($coments as $key=>$v): ?><div class="bm-box mui-table-view-cell" style="padding: 11px 15px;margin-bottom:0.333rem;margin-left:10px;width:100%;">
					<a href="javascript:;" style="display: inline-block;margin: -11px -15px;overflow: hidden;width:100%;">
					<img class="mui-media-object" src="<?php echo ($v["headimg"]); ?>" style="float:left; margin-right:10px;">
					<div class="mui-media-body">
						<?php echo ($v["nickname"]); ?>
						<span style="float: right;margin-right: 14px;"><?php echo (date("Y-m-d",$v["create_time"])); ?></span>
						<p>
							<?php echo ($v["content"]); ?>
						</p>
					</div>
					</a>
				</div><?php endforeach; endif; ?>
		<?php else: ?>
			<div class="bm-box  mui-table-view-cell" style="padding: 11px 15px;margin-bottom:0.333rem;margin-left:10px;">
				<div class="mui-media-body">
					<p>暂无评论</p>
				</div>
			</div><?php endif; ?>
    </div>
</div>
<div class="bm-box mt-10">
	<div class="head">
		<div class="title dot">
			猜你喜欢
		</div>
	</div>
	<div class="books-row">
		<?php if(is_array($guess)): foreach($guess as $key=>$vo): ?><div class="item">
			<a href="<?php echo U('Book/bookinfo');?>&bid=<?php echo ($vo["id"]); ?>">
				<img class="lazy" src="<?php echo ($vo["cover_pic"]); ?>" data-original="<?php echo ($vo["cover_pic"]); ?>" style="width:110px;height:146px;" />
				<div class="title"><?php echo ($vo["title"]); ?></div>
				<div class="text">更新至<?php echo ($vo["episodes"]); ?>章</div>
			</a>
		</div><?php endforeach; endif; ?>
	</div>
</div>
<div class="book-bar">
    <div class="inner">
        <div class="body">
            <span class="chapter">1话</span>
            <span class="title"><?php echo ($first['title']); ?></span>
        </div>
        <div class="action">
            <a href="<?php echo U('Book/inforedit');?>&bid=<?php echo ($info['id']); ?>&ji_no=1" class="btn">开始阅读</a>
        </div>
    </div>
</div>

<div class="bm-box mt-10" style="margin-bottom:3rem;">
	<div class="bubble">
		<span>打赏</span>
		<hr>
		<span class="sum_of_tip"><?php echo ($info['send']); ?>书币</span>
	</div>
	<a class="btn-tip-menu" href="javascript:;">打赏</a>
	<div class="tip-history">
		<h6 class="title">打赏记录</h6>
		<div class="no-data" style="display: none;text-align:center;font-size:16px">土豪，求打赏</div>
		<div class="rows">

		</div>
	</div>
	<a class="moreBtn" href="javascript:;" onclick="LoadSendMore();">查看更多</a>	
</div>
<div class="ds">
	<div class="msk" onclick="dsHide();"></div>
	<div class="txt">
		<div class="title">打赏</div>
		<div class="send">
			<ul>
				<?php if(is_array($_send)): foreach($_send as $k=>$v): ?><li _sid="<?php echo ($k); ?>">
						<img src="<?php echo ($v["pic"]); ?>" />
						<span><?php echo ($v["money"]); ?>书币</span>
					</li><?php endforeach; endif; ?>
			</ul>
		</div>
		<div class="dbtn" onclick="dsHide();">取消</div>
	</div>
</div>

<script type="text/javascript">
	var page = 1;
    $(function(){
		loadSend();
        $('.bm-tabs .item a').click(function(){
            var p_tabs = $(this).parents('.bm-tabs');
            p_tabs.find("div a").removeClass("active");
            $(this).addClass("active");
            var type = $(this).attr('type');
            if(type=='info'){
                $('#book-info').show();
                $('#other-box').show();
                $('#chapters').hide();
                $('.show-all').parent().show();
            }else{
                $('#book-info').hide();
                $('#other-box').hide();
                $('#chapters').show();
                var data = {book_id:bid,sort:1,cid:cid};
                //chapList_data(chap_url,data);
            }
        });
		
		var isji ="<?php echo ($_GET['isji']); ?>";
		if(isji == "1"){
			$('#btn_chap').click();
		}

        $('.sort a').click(function(){
            $("#html_box").empty();
            $('.show-all').parent().show();
            $(".sort a").removeClass("active");
            $(this).addClass("active");
            sort = $(this).attr("sort");
            var data = {book_id:bid,sort:sort};
           // chapList_data(chap_url,data);
        });

       $('.show-all').click(function(){
			//$(this).parent().hide();
			getData();
		}); 
		
		$('.btn-tip-menu').click(function(){
			$(".ds").fadeIn(300);
		})
		
		$('.ds li').click(function(){
			if(confirm("确定要打赏么？")){
				var sid = $(this).attr("_sid");
					mxid = "<?php echo ($info['id']); ?>";
				$.post("<?php echo U('Book/mxSend');?>",{sid:sid,mxid:mxid,type:"xs"},function(d){
					if(d){
						if(d.status){
							dsHide();
							alert(d.info);
							location.reload();
						}else{
							if(confirm(d.info)){
								location.href = d.url;
							}else{
								dsHide();
							}
						}
					}else{
						alert('非法请求!');
						dsHide();
					}
				})
			}else{
				dsHide();
			}
		})
		
	});
	
	function LoadSendMore(){
		page++;
		loadSend();
	}
	
	
	function loadSend(){
		$.post("<?php echo U('Book/LoadSend');?>",{mxid:"<?php echo ($info['id']); ?>","page":page,type:"xs"},function(d){
			if(d){
				console.log(d);
				if(d.status){
					var html = "";
					$(d.info).each(function(i,v){
						html+='<div class="row">'
							+'<div>'
							+'<img class="avatar" src="'+v.headimg+'" alt="'+v.nickname+'">'
							+'</div>'
							+'<div class="detail">'
							+'<p class="nickname">'+v.nickname+'</p>'
							+'<div class="gift">赠送: <img src="'+v.pic+'" alt=""> × 1 个礼物给作者</div>'
							+'<div class="datetime">'+v.create_time+'</div>'
							+'</div>'
							+'</div>';
					});
					console.log(html);
					$('.tip-history .rows').append(html);
					page++;
				}else{
					if(page == 2){
						$('.tip-history .no-data').show();
						$('.moreBtn').hide();
					}else{
						if(d.info){
							alert(d.info);
						}
					}
				}
			}else{
				alert('非法请求！');
			}
		})
	}
		
	function dsHide(){
		$(".ds").fadeOut(300);
	}
	
	var p = 1;
	function getData(){
		bh_msg_tips('正在加载章节，请稍等...');
		$.post("<?php echo U('Book/getJino');?>",{type:"xs",id:"<?php echo ($info['id']); ?>",p:p},function(d){
			$('#bh_msg_lay').remove();
			if(d){
				console.log(d);
				if(d.status){
					$('#html_box').append(d.info);
					p++;
				}else{
					bh_msg_tips(d.info);
				}
			}else{
				bh_msg_tips('请求失败');
			}
		});
	}
	
	function bh_msg_tips(msg) {
		var oMask = document.createElement("div");
		oMask.id = "bh_msg_lay";
		oMask.style.position = "fixed";
		oMask.style.left = "0";
		oMask.style.top = "50%";
		oMask.style.zIndex = "100";
		oMask.style.textAlign = "center";
		oMask.style.width = "100%";
		oMask.innerHTML = "<span style='background: rgba(0, 0, 0, 0.65);color: #fff;padding: 10px 15px;border-radius: 3px; font-size: 14px;'>" + msg
			+ "</span>"; document.body.appendChild(oMask);
		setTimeout(function () {
			$("#bh_msg_lay").remove();
		}, 2000);
	}
    
</script>

<script type="text/javascript">
	function user_add_book_shelf(bid) {
		var url1 = '<?php echo U("Book/user_add_book_shelf_ajax");?>';
        var data1 = {bid:bid};
        var fun1 = function(data2){
            if(data2.status == 1) {
                if(data2.tag == 1) {
                	var newtag = "<a href='javascript:void(0);' onclick='user_add_book_shelf("+bid+");' class='btn gray'>已收藏</a>";
                	$("#showcollect").html(newtag);
                } else {
                	var newtag = "<a href='javascript:void(0);' onclick='user_add_book_shelf("+bid+");' class='btn'><svg width='10' height='10' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><path fill='#fff' d='M20 8h-8V0H8v8H0v4h8v8h4v-8h8V8'></path></svg>收藏</a>";
                	$("#showcollect").html(newtag);
                }
            } else {
            	alert(data2.info);
            	location.href = "index.php?m=Home&c=MhPublic&a=login";
            }
        }
        $.post(url1,data1,fun1,'json');
	}


</script>
<script>
	window.shareData = {
		img: "<?php echo (complete_url($info['share_pic'])); ?>", 
		link: "<?php echo complete_url(U('bookinfo',http_build_query(array_merge(array('uid' => encode($user['id']),'bid'=>$info['id']),$_GET))));?>",
		title: "<?php echo ($info['share_title']); ?>",
		desc: "<?php echo ($info['share_desc']); ?>",
	};	
</script>
	<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
	<script>
	wx.config({
		debug: false,
		appId: "<?php echo ($jssdk['appId']); ?>",
		timestamp: <?php echo ($jssdk['timestamp']); ?>,
		nonceStr: '<?php echo ($jssdk['nonceStr']); ?>',
		signature: '<?php echo ($jssdk['signature']); ?>',
		jsApiList: ['onMenuShareTimeline','onMenuShareAppMessage']
	});
	wx.ready(function () {
		wx.checkJsApi({
			jsApiList: ['onMenuShareTimeline','onMenuShareAppMessage'], // 需要检测的JS接口列表，所有JS接口列表见附录2,
			success: function(res) {
				//alert(JSON.stringify(res));
			}
		});
		wx.error(function(res){
			console.log('err:'+JSON.stringify(res));
			// config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。

		});
		//分享给朋友
		wx.onMenuShareAppMessage({
			title: window.shareData.title, // 分享标题
			desc: window.shareData.desc, // 分享描述
			link: window.shareData.link, // 分享链接
			imgUrl: window.shareData.img, // 分享图标
			type: 'link', // 分享类型,music、video或link，不填默认为link
			dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
			success: function () { 
			},
			cancel: function () { 
				
			}
		});
		//分享到朋友圈
		wx.onMenuShareTimeline({
			title: window.shareData.title, // 分享标题
			link: window.shareData.link, // 分享链接
			imgUrl: window.shareData.img, // 分享图标
			success: function () { 
				// 用户确认分享后执行的回调函数
			},
			cancel: function () { 
				// 用户取消分享后执行的回调函数
			}
		});
	});
	</script>
	<?php echo ($_CFG["site"]["thirdcode"]); ?>

</body></html>